/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as a,jsxs as b,Fragment as v}from"@dropins/tools/preact-jsx-runtime.js";import{Price as z,Image as A,CartItem as B,Icon as K,Incrementer as Q}from"@dropins/tools/components.js";import{useCallback as F}from"@dropins/tools/preact-hooks.js";import{classes as H,Slot as R}from"@dropins/tools/lib.js";import{O as U}from"./OrderLoaders.js";import*as N from"@dropins/tools/preact-compat.js";const G=o=>N.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o},N.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),N.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.75 5.88423V4.75H12.25V5.88423L12.0485 13.0713H11.9515L11.75 5.88423ZM11.7994 18.25V16.9868H12.2253V18.25H11.7994Z",stroke:"currentColor"})),ee=({slots:o,placeholderImage:O="",loading:M,product:e,itemType:Z,taxConfig:j,translations:h,disabledIncrementer:q,onQuantity:P,showConfigurableOptions:k,routeProductDetails:u})=>{var _,D,f,L,V;const{taxExcluded:w,taxIncluded:I}=j,l=F((i,s,t)=>a(z,{amount:i,currency:s,weight:"normal",...t}),[]),S=F(i=>{var t,x;const s=(t=i==null?void 0:i.product)!=null&&t.thumbnail.url.length?(x=i==null?void 0:i.product)==null?void 0:x.thumbnail.url:O;return a(A,{src:s,alt:i==null?void 0:i.productName,loading:"lazy",width:"90",height:"120"})},[O]);if(!e)return a(U,{});let y={};const d=Z==="cancelled",W=(D=(_=e==null?void 0:e.product)==null?void 0:_.stockStatus)==null?void 0:D.includes("IN_STOCK"),n=e==null?void 0:e.giftCard,$=e.totalQuantity>1?{quantity:e.totalQuantity}:{},E=e.discounted,{includeAndExcludeTax:c,includeTax:g,excludeTax:r}=e.taxCalculations,m=e==null?void 0:e.totalQuantity,T={...(e==null?void 0:e.configurableOptions)||{},...(e==null?void 0:e.bundleOptions)||{},...n!=null&&n.senderName?{[h.sender]:n==null?void 0:n.senderName}:{},...n!=null&&n.senderEmail?{[h.sender]:n==null?void 0:n.senderEmail}:{},...n!=null&&n.senderName?{[h.sender]:n==null?void 0:n.senderName}:{},...n!=null&&n.recipientEmail?{[h.recipient]:n==null?void 0:n.recipientEmail}:{},...n!=null&&n.message?{[h.message]:n==null?void 0:n.message}:{},...e!=null&&e.downloadableLinks?{[`${(f=e==null?void 0:e.downloadableLinks)==null?void 0:f.count} ${h.downloadableCount}`]:(L=e==null?void 0:e.downloadableLinks)==null?void 0:L.result}:{}};if(I&&w){const i=l(c.originalPrice.value,c.originalPrice.currency),s=l(c.baseOriginalPrice.value*m,c.baseOriginalPrice.currency,{variant:e.discounted?"strikethrough":"default",weight:"bold"}),t=l(c.baseDiscountedPrice.value*m,c.baseDiscountedPrice.currency,{sale:!0,weight:"bold"}),x=l(c.baseExcludingTax.value*m,c.baseExcludingTax.currency,{weight:"bold"});y={taxExcluded:!0,taxIncluded:void 0,price:i,total:b(v,{children:[s,e.discounted?t:null]}),totalExcludingTax:x}}else if(!I&&w){const i=l(r.originalPrice.value,r.originalPrice.currency),s=l(r.baseOriginalPrice.value*m,r.baseOriginalPrice.currency,{variant:E?"strikethrough":"default",weight:"bold"}),t=l(r.baseDiscountedPrice.value*m,r.baseDiscountedPrice.currency,{sale:!0,weight:"bold"}),x=l(r.baseExcludingTax.value*m,r.baseExcludingTax.currency,{weight:"bold"});y={taxExcluded:void 0,taxIncluded:void 0,price:i,total:b(v,{children:[s,E?t:null]}),totalExcludingTax:x}}else if(I&&!w){const i=l(g.singleItemPrice.value,g.singleItemPrice.currency),s=l(g.baseOriginalPrice.value*m,g.baseOriginalPrice.currency,{variant:E?"strikethrough":"default",weight:"bold"}),t=l(g.baseDiscountedPrice.value*m,g.baseDiscountedPrice.currency,{sale:!0,weight:"bold"});y={taxExcluded:void 0,taxIncluded:!0,price:i,total:b(v,{children:[s,E?t:null]})}}return a(B,{loading:M,alert:d&&W?b("span",{children:[a(K,{source:G}),h.outOfStock]}):a(v,{}),configurations:(k==null?void 0:k(T))??T,title:u?a("a",{"data-testid":"product-name",className:H(["cart-summary-item__title",["cart-summary-item__title--strikethrough",d]]),href:u(e),children:e==null?void 0:e.productName}):a("div",{"data-testid":"product-name",className:H(["cart-summary-item__title",["cart-summary-item__title--strikethrough",d]]),children:e==null?void 0:e.productName}),sku:a("div",{children:(V=e==null?void 0:e.product)==null?void 0:V.sku}),...$,image:u?a("a",{href:u(e),children:S(e)}):S(e),...y,footer:b(v,{children:[P&&!q?a(Q,{value:1,min:1,max:e==null?void 0:e.totalQuantity,onValue:i=>P==null?void 0:P(Number(i)),name:"quantity","data-testid":"returnIncrementer",readonly:!0}):void 0,a(R,{"data-testid":"Footer",name:"Footer",slot:o==null?void 0:o.Footer,context:{item:e}})]})})};export{ee as C,G as S};
